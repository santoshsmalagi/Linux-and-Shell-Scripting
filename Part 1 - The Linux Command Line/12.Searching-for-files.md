# Searching for Files in Linux

### Quick file name search (locate)
The ```locate``` command performs a quick database search of a string and outputs the name of the matched files along with their complete or absolute paths in the output.

```console
locate <filename>       # return a search of all pathnames containing the substring <filename>
locate -c "/bin/zip"    # display a count of entries matching /bin/zip 
locate -n 9 "*.html"    # limit search queries to a specific number i.e. only 9 entries
locate -i "TeXt"        # ignore case sensitive output
locate -e "README"      # force locate to only print those entries which correspond to existing files on the system
locate -r "bzip2"       # search for an exact filename, otherwise all strings having the matching substring are displayed
sudo updatedb           # update the locate database
locate -S               # view information about the locate database
```
> **Drawbacks of using the locate command** <br>
  Unlike the ```find``` command which performs a search of the file system and looks through the directory hierarchies, locate searches a database generated by the ```updatedb``` program, thereby returning quick results. The caveat to this approach is that, if the database is not updated (the ```updatedb``` program is run periodically) then locate is not efficient. For example, recently created files or directories may not show up, or files deleted a while ago might still show up. One way of overcoming this limitation is to run ```updatedb``` command manually. **However, another major drawback is that it requires superuser privilages to run the updatedb command!**. So the ```locate``` command is kind of a quick and easy hack, but not a full fledged replacement of ```find```. Other useful tricks would be to combine ```locate``` output with ```grep```.


### Searching for files in Linux (find)
```find``` command searches a given directory (and its subdirectories) for files based on a variety of attributes. These attributes can be broadly classified into three categories and the most common ones are:
* **Tests**
    * find files by ```-type```: block special device file (b), character special device file (c), directory (d), regular file (f), symbolic link (l)
    * find files by ```-size:``` b (512 byte blocks), c (bytes), w (2-byte words), k (Kilobytes), M (megabytes), G (Gigabytes)
        * a leading '+' indicates files larger than specified size (e.g. +1M - larger than 1M), '-' indicates files smaller than specified size, no sign means match exactly
    * find files by ```-name \<pattern\>:``` find files using the specified pattern
        * the pattern is enclosed in quotes to avoid pathname expansion, special characters are escaped using backslash
    * find files and ignore case ```-iname \<pattern\>```
    * find files by ```-user <name>:``` find files belonging to a specified user
    * Many others including
      * ```-empty```      - match empty files and directories
      * ```-cmin n```     - match files or directories whose contetn was modified _n_ minutes ago
      * ```-group name``` - match file or directory belonging to a group name
      * ```-newer file``` - match files or directories whose contents were modified more recently than the specified file
      * ```perm mode```   - match files or directories that have permissions set to a specified mode, mode may be expressed in either symbolic or octal notation
* **Operators**
    * ```find``` provides a way to combine tests using logical operators to describe logical relationships between tests
        * ```-and``` - match if tests on both sides of the operator are true
        * ```-or```  - match if tests on either side of the operator is true
        * ```-not``` - match if the test is false
        * ```\(\)``` - use parantheses to create larger test expressions
* **Actions** 
  * ```find``` provides several ways to apply pre-defined actions as well as user-defined actions
      * ```-delete``` - delete the matching file
      * ```-ls```     - perform an ls on the matching file
      * ```-print```  - print the full path name to the STDOUT
      * ```-exec <command> '{}' ';'``` - invoke arbitrary command, \{\} specifies the current pathname, escape the braces and colon
      * ```-exec <command> '{}' '+'``` - invoke arbitrary command, \{\} specifies the current pathname, escape the braces and colon
      * ```-ok <command> '{}' ';'```   - interactively invoke arbitrary command, \{\} specifies the current pathname
        * the braces and colon must be escaped with a backslash or entered in quotes to avoid expansions
 

```console
find                              # list all files, and sub directories in the current working directory
find ~                            # print a list of all files in the user home directory, including dot files
find . -name "README.txt"         # find all files named README.txt in the current working directory
find . -name "*.txt"              # find all files matching this pattern in the current working directory
find . -iname "TeXt.txt"          # find filename without considering case
find / -type d -name "/usr/"      # find all directories in / with /usr in pathname
find /home -perm 755              # search for files with entered permissions
find ./ -type f and -perm 777     # find all files with permission 777
find /tmp -type d -empty          # find all empty directories
find . -maxdepth 2 -name "*.php"  # limit depth of directory traversal

# find all text files ending with .txt extension for user malagi 
find /home -user malagi -iname "*.txt"                                

# find directories with 777 permissions and change permissions to 755
find / -type d -perm 777 -print -exec chmod 755 {} \;

# delete all files matching a specific criteria
find . -type f -name "*.mp3" -exec rm -f {} ';'

# copy all files matching a criteria
find . -name "*.dspf" -type f -exec cp {} /home/DSPF ';'

```

### Some useful links
![35 Practical Examples of Linux Find Command](https://www.tecmint.com/35-practical-examples-of-linux-find-command/)  <br>
![Linux and Unix find command tutorial](https://shapeshed.com/unix-find/)  
![25 simple examples of Linux find command](https://www.binarytides.com/linux-find-command-examples/)
